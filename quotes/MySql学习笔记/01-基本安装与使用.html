<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.json',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="数据库概述重要组成：数据库、数据库管理系统、数据库应用程序等。SQL语言分类（1）数据定义语言（Data Definition Language, DDL），主要用于定义数据库、表等。（2）数据操作语言（Data Manipulation Language,DML）。主要用于数据增、删、改操作。（3）数据查询语言（Data Query Language,DQL），主要用于查询数据。">
<meta property="og:type" content="website">
<meta property="og:title" content="JJT-个人Wiki">
<meta property="og:url" content="https:&#x2F;&#x2F;hexo-pages-1300861231.cos-website.ap-shanghai.myqcloud.com&#x2F;quotes&#x2F;MySql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0&#x2F;01-%E5%9F%BA%E6%9C%AC%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8.html">
<meta property="og:site_name" content="JJT-个人Wiki">
<meta property="og:description" content="数据库概述重要组成：数据库、数据库管理系统、数据库应用程序等。SQL语言分类（1）数据定义语言（Data Definition Language, DDL），主要用于定义数据库、表等。（2）数据操作语言（Data Manipulation Language,DML）。主要用于数据增、删、改操作。（3）数据查询语言（Data Query Language,DQL），主要用于查询数据。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;hexo-1300861231.cos.ap-shanghai.myqcloud.com&#x2F;1584879294_20200322200850487_15228.png">
<meta property="og:image" content="https:&#x2F;&#x2F;hexo-1300861231.cos.ap-shanghai.myqcloud.com&#x2F;1584879294_20200322200850071_14928.png">
<meta property="og:updated_time" content="2020-12-15T11:07:33.032Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;hexo-1300861231.cos.ap-shanghai.myqcloud.com&#x2F;1584879294_20200322200850487_15228.png">

<link rel="canonical" href="https://hexo-pages-1300861231.cos-website.ap-shanghai.myqcloud.com/quotes/MySql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/01-%E5%9F%BA%E6%9C%AC%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: false,
    isPage: true,
    isArchive: false
  };
</script>

  <title> | JJT-个人Wiki
  </title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JJT-个人Wiki</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">you see see you one day day</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content">
            

  <div class="posts-expand">
    
    
    
    <div class="post-block" lang="zh-CN">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">
</h1>

<div class="post-meta">
  
  <ul class="breadcrumb">
          
            <li><a href="/quotes/">QUOTES</a></li>
            <li><a href="/quotes/MySql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">MYSQL学习笔记</a></li>
            <li>01-基本安装与使用</li>
          
  </ul>

</div>

</header>

      
      
      
      <div class="post-body">
          <h1>数据库概述</h1><p><img src="https://hexo-1300861231.cos.ap-shanghai.myqcloud.com/1584879294_20200322200850487_15228.png" alt></p><p>重要组成：数据库、数据库管理系统、数据库应用程序等。</p><h2 id="SQL语言分类">SQL语言分类</h2><p>（1）数据定义语言（Data Definition Language, DDL），主要用于定义数据库、表等。</p><p>（2）数据操作语言（Data Manipulation Language,DML）。主要用于数据增、删、改操作。</p><p>（3）数据查询语言（Data Query Language,DQL），主要用于查询数据。</p><a id="more"></a>






<p>（4）数据控制语言（Data Control Language, DCL），主要用于控制用户的访问权限。</p>
<h2 id="常见的数据库产品">常见的数据库产品</h2>
<p>Oracle数据库，SQL Server，DB2数据库，MongoDB，MySQL。</p>
<h1>MySQL安装</h1>
<h2 id="Windows平台下安装MySQL">Windows平台下安装MySQL</h2>
<h3 id="配置向导">配置向导</h3>
<p>双击MySQLInstanceConfig.exe文件启动配置向导，配置如下内容：</p>
<p>服务器类型选择，数据库用途选择，InnoDB表存储路径配置，数据库最大并发连接数配置，网络连接及端口号配置，启用严格模式，默认字符集编码设置，注册window服务，添加到Path环境变量，用户/密码设置等。</p>
<h3 id="启动MySQL服务">启动MySQL服务</h3>
<p>Windows中启动MySQL服务：</p>
<p>方法一：通过Windows服务管理器启动MySQL服务。</p>
<p>方法二：通过DOS命令启动MySQL服务：</p>
<p>启动命令：net start mysql</p>
<p>关闭命令：net stop mysql</p>
<h2 id="Linux平台下安装MySQL">Linux平台下安装MySQL</h2>
<h3 id="CentOS平台RPM软件包安装">CentOS平台RPM软件包安装</h3>
<ol>
<li>下载mysql安装文件</li>
</ol>
<p>下载地址：<a href="http://dev.mysql.com/downloads/mysql/#downloads" target="_blank" rel="noopener">http://dev.mysql.com/downloads/mysql/#downloads</a></p>
<ol start="2">
<li>检查是否安装过MySQL</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -qa | grep -i mysql</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>卸载旧的mysql</li>
</ol>
<p>（1） 停止mysql服务、删除之前安装的mysql</p>
<p>删除命令：rpm -ev –nodeps 包名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ev MySQL-server-5.6.21-1.el6.x86_64</span><br><span class="line">sudo rpm -ev MySQL-devel-5.6.21-1.el6.x86_64</span><br><span class="line">sudo rpm -ev MySQL-client-5.6.21-1.el6.x86_64</span><br></pre></td></tr></table></figure>
<p>如果存在CentOS自带mysql-libs-5.6.21-1.el6.x86_64使用下面的命令卸载即可</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ev --nodeps mysql-libs-5.6.21-1.el6.x86_64</span><br></pre></td></tr></table></figure>
<p>（2） 查找之前老版本mysql的目录并且删除老版本mysql的文件和库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo find / -name mysql</span><br></pre></td></tr></table></figure>
<p>删除对应的mysql目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /usr/lib64/mysql</span><br><span class="line">sudo rm -rf /var/lib/mysql</span><br></pre></td></tr></table></figure>
<p>（3） 再次查找机器是否安装mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -qa | grep -i mysql</span><br></pre></td></tr></table></figure>
<p>无结果，说明已经卸载彻底、接下来直接安装mysql即可</p>
<ol start="4">
<li>安装MySQL服务端</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ivh MySQL-server-5.6.21-1.el6.x86_64.rpm</span><br></pre></td></tr></table></figure>
<p>出现异常，安装缺少的libaio依赖包，使用如下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install libaio</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>安装mysql客户端、mysql-devel</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ivh MySQL-server-5.6.21-1.el6.x86_64.rpm</span><br><span class="line">sudo rpm -ivh MySQL-client-5.6.21-1.el6.x86_64.rpm</span><br><span class="line">sudo rpm -ivh MySQL-devel-5.6.21-1.el6.x86_64.rpm</span><br></pre></td></tr></table></figure>
<h3 id="Ubuntu平台安装MySQL">Ubuntu平台安装MySQL</h3>
<p>Ubuntu上安装MySQL：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br><span class="line">sudo apt-get install mysql-client</span><br><span class="line">sudo apt-get install libmysqlclient-dev</span><br></pre></td></tr></table></figure>
<p>安装过程中会提示设置密码什么的，注意设置了不要忘了。</p>
<h3 id="mysql-secure-installation">mysql_secure_installation</h3>
<p>安装完mysql，最好执行mysql_secure_installation来做一些常规化安全设置。</p>
<p>需要提前将~mysql/bin加入环境变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">/apps/mysql/bin/mysql_secure_installation</span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL</span><br><span class="line">     SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line">In order to log into MySQL to secure it, we'll need the current</span><br><span class="line">password for the root user.  If you've just installed MySQL, and</span><br><span class="line">you haven't set the root password yet, the password will be blank,</span><br><span class="line">so you should just press enter here.</span><br><span class="line">Enter current password for root (enter for none):</span><br><span class="line"><span class="meta">#</span><span class="bash"> 提示输入密码，没有密码就直接回车</span></span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line">Setting the root password ensures that nobody can log into the MySQL</span><br><span class="line">root user without the proper authorisation.</span><br><span class="line">Set root password? [Y/n]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 提示设置root user密码</span></span><br><span class="line">New password:</span><br><span class="line">Re-enter new password:</span><br><span class="line">Password updated successfully!</span><br><span class="line">Reloading privilege tables..</span><br><span class="line">... Success!</span><br><span class="line">By default, a MySQL installation has an anonymous user, allowing anyone</span><br><span class="line">to log into MySQL without having to have a user account created for</span><br><span class="line">them.  This is intended only for testing, and to make the installation</span><br><span class="line">go a bit smoother.  You should remove them before moving into a</span><br><span class="line">production environment.</span><br><span class="line">Remove anonymous users? [Y/n]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 生产环境建议删除系统创建的匿名用户  Y</span></span><br><span class="line">... Success!</span><br><span class="line">Normally, root should only be allowed to connect from 'localhost'.  This</span><br><span class="line">ensures that someone cannot guess at the root password from the network.</span><br><span class="line">Disallow root login remotely? [Y/n]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 禁止root用户远程登录  Y</span></span><br><span class="line">By default, MySQL comes with a database named 'test' that anyone can</span><br><span class="line">access.  This is also intended only for testing, and should be removed</span><br><span class="line">before moving into a production environment.</span><br><span class="line">Remove test database and access to it? [Y/n]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除<span class="built_in">test</span>数据库  Y</span></span><br><span class="line">- Dropping test database...</span><br><span class="line">... Success!</span><br><span class="line">- Removing privileges on test database...</span><br><span class="line">... Success!</span><br><span class="line">Reloading the privilege tables will ensure that all changes made so far</span><br><span class="line">will take effect immediately.</span><br><span class="line">Reload privilege tables now? [Y/n]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重载权限表  Y</span></span><br><span class="line">... Success!</span><br><span class="line">All done!  If you've completed all of the above steps, your MySQL</span><br><span class="line">installation should now be secure.</span><br><span class="line">Thanks for using MySQL!</span><br><span class="line">Cleaning up...</span><br></pre></td></tr></table></figure>
<p>完成~~~</p>
<h3 id="启动MySQL服务-2">启动MySQL服务</h3>
<p>通过下面查看mysql服务状态：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql status</span><br></pre></td></tr></table></figure>
<p>如果mysql没有启动，通过如下命令进行启动：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql start</span><br></pre></td></tr></table></figure>
<p>相关参数：</p>
<p>（1）start：启动服务。</p>
<p>（2）stop：停止服务。</p>
<p>（3）restart：重启服务。</p>
<p>（4）status：查看服务状态。</p>
<h1>MySQL目录结构</h1>
<p>（1）bin目录：放置可执行文件；</p>
<p>（2）data目录：放置日志文件以及数据库；</p>
<p>（3）include目录：放置头文件；</p>
<p>（4）lib目录：放置库文件；</p>
<p>（5）share目录：存放字符集、语言等信息；</p>
<p>（6）my.ini：MySQL数据库当前使用的配置文件；</p>
<p>（7）my-XXX.ini：适合各种特殊数据库的配置文件；</p>
<p>（8）my-template.ini：配置文件模板，MySQL配置向导将该配置文件中选择项写入到my.ini文件。</p>
<h1>MySQL基本配置</h1>
<h2 id="MySQL配置方法">MySQL配置方法</h2>
<ol>
<li>通过命令配置MySQL：</li>
</ol>
<p>例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set character_set_client =gbk</span><br></pre></td></tr></table></figure>
<p>这种方式的修改只针对当前链接有效。</p>
<ol start="2">
<li>通过配置文件，长期有效：</li>
</ol>
<p>window下mysql配置文件为：安装目录/my.ini</p>
<p>Linux下mysql配置文件为：/etc/mysql/my.cnf</p>
<p>例如：配置文件中“default-character-set=utf8”替换为gbk。</p>
<h2 id="配置MySQL数据库远程连接">配置MySQL数据库远程连接</h2>
<p>远程登陆数据库的时候出现了下面出错信息:</p>
<p>ERROR 2003 (HY000): Can’t connect to MySQL server on ‘<a href="http://xxx.xxx.xxx.xxx" target="_blank" rel="noopener">xxx.xxx.xxx.xxx</a>’,</p>
<p>关于MySql数据库无法远程连接的问题可以归结为以下几点:</p>
<ol>
<li><strong>没有授予相应的权限:</strong></li>
</ol>
<p>例如，你想root使用123456从任何主机连接到mysql服务器。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> GRANT ALL PRIVILEGES ON *.* TO <span class="string">'root'</span>@<span class="string">'%'</span> IDENTIFIED BY <span class="string">'123456'</span> WITH GRANT OPTION;</span></span><br></pre></td></tr></table></figure>
<p>如果你想允许用户jack从ip为10.10.50.127的主机连接到mysql服务器，并使用654321作为密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> GRANT ALL PRIVILEGES ON *.* TO <span class="string">'jack'</span>@’10.10.50.127’ IDENTIFIED BY <span class="string">'654321'</span> WITH GRANT OPTION;</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> FLUSH RIVILEGES</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>防火墙禁止了3306端口，以iptable为例</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure>
<p>增加下面一行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 3306-j ACCEPT  </span><br><span class="line">service iptables restart</span><br></pre></td></tr></table></figure>
<p>ps: iptables设置</p>
<ol>
<li>重启后生效</li>
</ol>
<p>开启： chkconfig iptables on</p>
<p>关闭： chkconfig iptables off</p>
<ol start="2">
<li>即时生效，重启后失效</li>
</ol>
<p>开启： service iptables start</p>
<p>关闭： service iptables stop</p>
<ol start="3">
<li><strong>修改MySQL的配置文件/etc/mysql/my.cnf，因为默认3306端口只允许本地访问的，注释掉这行：</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">bind</span>-address = 127.0.0.1</span></span><br></pre></td></tr></table></figure>
<p>然后重启Mysql：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysql restart</span><br></pre></td></tr></table></figure>
<p>（注：保险起见，重启虚拟机）</p>
<h2 id="MySql连接错误：Can’t-get-hostname…">MySql连接错误：Can’t get hostname…</h2>
<p>某Web应用的数据库部署在 <a href="http://100.ZZZ.YYY.XXX" target="_blank" rel="noopener">100.ZZZ.YYY.XXX</a> 的 MySql 5.5.5 实例（新装机器）上，</p>
<p>但是当用PHP或者Python从远端机器上试图访问该数据库时，会得到如下错误提示：</p>
<p>“Can’t get hostname for your address”。</p>
<p>需要琢磨一下才能明白，这句提示是 MySql Server 返回给客户端的。</p>
<p>也就是说，MySql Server在试图对客户端IP地址进行反向域名解析，试图得到主机名，然而我们发起访问的客户端要么是自己的机器，要么是机房的服务器，所以无法得到主机名，MySql Server 遂报错，拒绝客户端连接。</p>
<p><strong>简单解释</strong></p>
<p>MySQL server received a request from you to allow you to connect to the database. So next thing it tried to do is to check what name is bound to your IP address (name resolution) and it failed to do so. So it just denied you access.</p>
<p>可以这么理解mysql处理客户端解析的过程：</p>
<p>1，当 mysql client 发起连接请求时，MySql Server 会主动去查 client 的主机名。</p>
<p>2，首先查找Windows系统目录下 /etc/hosts 文件，搜索域名和IP的对应关系。</p>
<p>3，如果hosts文件没有，则查找DNS设置，如果没有设置DNS服务器，会立刻返回失败；如果设置了DNS服务器，就进行反向解析，直到timeout。</p>
<p><strong>解决办法</strong></p>
<p>第一种方法：修改Hosts</p>
<p>在 MySql Server 所在服务器上，修改 Windows 的 hosts 文件，增加一行记录，如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">100.ZZZ.YYY.XXX dummy.ju690.cn</span><br></pre></td></tr></table></figure>
<p>然后在 <a href="http://100.ZZZ.YYY.XXX" target="_blank" rel="noopener">100.ZZZ.YYY.XXX</a> 机器上用 Python 发起连接请求，经测试，可以正常连接，说明 MySql Server 这下可以通过 getnameinfo() <a href="http://xn--100-1d2ev00hlb7b.ZZZ.YYY.XXX" target="_blank" rel="noopener">解析出100.ZZZ.YYY.XXX</a> 的主机名了。</p>
<p>但这种方法很机械，所以一般采用下面这种方法。</p>
<p>第二种：修改MySql的配置文件 my.ini</p>
<p>The solution:<br>
Just add skip-name-resolve option to your MySQL configuration file (my.ini).</p>
<p>在 MySql Server 的配置文件 my.ini （Linux是my.cnf）中，增加如下两行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">skip-name-resolve</span><br></pre></td></tr></table></figure>
<p>它将禁止 MySql Server 对外部连接进行 DNS 解析，使用这一选项可以消除 MySql 进行 DNS 解析的时间。</p>
<p>但需要注意，如果开启该选项，则所有远程主机连接授权都要使用IP地址方式，否则MySQL将无法正常处理连接请求。</p>
<p><strong>可能的后果</strong></p>
<p>如果开启 skip-name-resolve 选项，要确认 MySql 是否采用过主机名的授权。</p>
<p>在 mysql 中运行如下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> select user,host from mysql.user <span class="built_in">where</span> host &lt;&gt; <span class="string">'localhost'</span> ;</span></span><br></pre></td></tr></table></figure>
<p>一般会得到以“%”授权（也就是任何地址）的记录：</p>
<p>±-----------------±------------+<br>
| user | host |<br>
±-----------------±------------+<br>
| root | % |<br>
| user_sync | 192.168.0.113 |</p>
<p>如果有host名是什么“DB1”“DB2”的，那么删除授权表中有 hostanme 的记录，然后重启mysql。</p>
<h1>MySQL命令行客户端使用</h1>
<p>首先登录到MySQL数据库，然后在命令行窗口中输入</p>
<p>“help;”(简写&quot;\h&quot;)</p>
<p>显示MySQL的帮助信息，及MySQL的所有命令。</p>
<p><img src="https://hexo-1300861231.cos.ap-shanghai.myqcloud.com/1584879294_20200322200850071_14928.png" alt></p>
<p>\s 命令查看数据库信息；</p>
<p>\u 命令切换数据库。</p>
<h2 id="登录MySQL">登录MySQL</h2>
<ol>
<li>使用相关命令登录：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h hostname -u username -p</span><br></pre></td></tr></table></figure>
<p>然后在系统提示处输入密码，或者直接在-p参数后面附加密码。</p>
<ol start="2">
<li>使用MySQL Command Line Client客户端。打开客户端窗口会提示输入密码。</li>
</ol>
<h2 id="设置root用户登录密码">设置root用户登录密码</h2>
<p>设置root用户登录密码：</p>
<p>命令：mysql_secure_installation</p>
<p>然后在提示位置输入设定密码。</p>

      </div>
      
      
      
    </div>
    
  <ul class="breadcrumb">
          
            <li><a href="/quotes/">QUOTES</a></li>
            <li><a href="/quotes/MySql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">MYSQL学习笔记</a></li>
            <li>01-基本安装与使用</li>
          
  </ul>

    
    
    
  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">数据库概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL语言分类"><span class="nav-text">SQL语言分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常见的数据库产品"><span class="nav-text">常见的数据库产品</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">MySQL安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Windows平台下安装MySQL"><span class="nav-text">Windows平台下安装MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#配置向导"><span class="nav-text">配置向导</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#启动MySQL服务"><span class="nav-text">启动MySQL服务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux平台下安装MySQL"><span class="nav-text">Linux平台下安装MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CentOS平台RPM软件包安装"><span class="nav-text">CentOS平台RPM软件包安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ubuntu平台安装MySQL"><span class="nav-text">Ubuntu平台安装MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mysql-secure-installation"><span class="nav-text">mysql_secure_installation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#启动MySQL服务-2"><span class="nav-text">启动MySQL服务</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">MySQL目录结构</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">MySQL基本配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL配置方法"><span class="nav-text">MySQL配置方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置MySQL数据库远程连接"><span class="nav-text">配置MySQL数据库远程连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySql连接错误：Can’t-get-hostname…"><span class="nav-text">MySql连接错误：Can’t get hostname…</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">MySQL命令行客户端使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#登录MySQL"><span class="nav-text">登录MySQL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置root用户登录密码"><span class="nav-text">设置root用户登录密码</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="jiateng.jiang"
    src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">jiateng.jiang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">44</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jiateng.jiang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.2
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  






  <script src="/js/local-search.js"></script>








<script>
if (document.querySelectorAll('div.pdf').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/pdfobject@2/pdfobject.min.js', () => {
    document.querySelectorAll('div.pdf').forEach(element => {
      PDFObject.embed(element.getAttribute('target'), element, {
        pdfOpenParams: {
          navpanes: 0,
          toolbar: 0,
          statusbar: 0,
          pagemode: 'thumbs',
          view: 'FitH'
        },
        PDFJS_URL: '/lib/pdf/web/viewer.html',
        height: element.getAttribute('height') || '100%'
      });
    });
  }, window.PDFObject);
}
</script>





  

  

  

</body>
</html>
