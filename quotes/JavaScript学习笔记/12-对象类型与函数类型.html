<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.json',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="对象(Object)类型除了基本类型之外，其他的所有类型都是对象(Object)类型。JavaScript对象类型可以定义为属性的集合。JavaScript的对象是一组由键-值组成的无序集合，例如：12345678var person = &amp;#123;   name: &amp;apos;Bob&amp;apos;,   age: 20,   tags: [&amp;apos;js&amp;apos;, &amp;apos;web&amp;apos;, &amp;apos;mobile&amp;apos;],   city: &amp;apos;Beiji">
<meta property="og:type" content="website">
<meta property="og:title" content="JJT-个人Wiki">
<meta property="og:url" content="https:&#x2F;&#x2F;hexo-pages-1300861231.cos-website.ap-shanghai.myqcloud.com&#x2F;quotes&#x2F;JavaScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0&#x2F;12-%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B.html">
<meta property="og:site_name" content="JJT-个人Wiki">
<meta property="og:description" content="对象(Object)类型除了基本类型之外，其他的所有类型都是对象(Object)类型。JavaScript对象类型可以定义为属性的集合。JavaScript的对象是一组由键-值组成的无序集合，例如：12345678var person = &amp;#123;   name: &amp;apos;Bob&amp;apos;,   age: 20,   tags: [&amp;apos;js&amp;apos;, &amp;apos;web&amp;apos;, &amp;apos;mobile&amp;apos;],   city: &amp;apos;Beiji">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;hexo-1300861231.cos.ap-shanghai.myqcloud.com&#x2F;1584596396_20200319133416083_29980.png">
<meta property="og:image" content="https:&#x2F;&#x2F;hexo-1300861231.cos.ap-shanghai.myqcloud.com&#x2F;1584596396_20200319133415971_16894.png">
<meta property="og:image" content="https:&#x2F;&#x2F;hexo-1300861231.cos.ap-shanghai.myqcloud.com&#x2F;1584596396_20200319133415759_26740.png">
<meta property="og:image" content="https:&#x2F;&#x2F;hexo-1300861231.cos.ap-shanghai.myqcloud.com&#x2F;1584596395_20200319133415532_8065.png">
<meta property="og:updated_time" content="2020-12-15T11:07:33.016Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;hexo-1300861231.cos.ap-shanghai.myqcloud.com&#x2F;1584596396_20200319133416083_29980.png">

<link rel="canonical" href="https://hexo-pages-1300861231.cos-website.ap-shanghai.myqcloud.com/quotes/JavaScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/12-%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: false,
    isPage: true,
    isArchive: false
  };
</script>

  <title> | JJT-个人Wiki
  </title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JJT-个人Wiki</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">you see see you one day day</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content">
            

  <div class="posts-expand">
    
    
    
    <div class="post-block" lang="zh-CN">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">
</h1>

<div class="post-meta">
  
  <ul class="breadcrumb">
          
            <li><a href="/quotes/">QUOTES</a></li>
            <li><a href="/quotes/JavaScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">JAVASCRIPT学习笔记</a></li>
            <li>12-对象类型与函数类型</li>
          
  </ul>

</div>

</header>

      
      
      
      <div class="post-body">
          <h1>对象(Object)类型</h1><p>除了基本类型之外，其他的所有类型都是对象(Object)类型。JavaScript对象类型可以定义为属性的集合。</p><p>JavaScript的对象是一组由键-值组成的无序集合，例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">   name: <span class="string">'Bob'</span>,</span><br><span class="line">   age: <span class="number">20</span>,</span><br><span class="line">   tags: [<span class="string">'js'</span>, <span class="string">'web'</span>, <span class="string">'mobile'</span>],</span><br><span class="line">   city: <span class="string">'Beijing'</span>,</span><br><span class="line">   hasCar: <span class="literal">true</span>,</span><br><span class="line">   zipcode: <span class="literal">null</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><a id="more"></a>



<p>JavaScript用一个{…}表示一个对象，键值对以xxx: xxx形式申明，用,隔开。注意，最后一个键值对不需要在末尾加,，如果加了，有的浏览器（如低版本的IE）将报错。</p>
<p>JavaScript对象的键都是字符串类型，值可以是任意数据类型。上述person对象一共定义了6个键值对，其中每个键又称为对象的属性，例如，person的name属性为’Bob’，zipcode属性为null。</p>
<p>可以通过instanceof运算来判断对象类型。对Object类型进行typeof运算，得到的结果是&quot;object&quot;。</p>
<p><strong>创建对象的方式：</strong></p>
<ul>
<li>
<p><strong>new表达式</strong>：通过new表达式把函数作为构造函数调用，从而生成对象。</p>
</li>
<li>
<p><strong>对象字面量</strong>：由大括号括住，内部有属性名和属性值。</p>
</li>
<li>
<p><strong>Object类的create()方法。</strong></p>
</li>
</ul>
<h2 id="对象字面量">对象字面量</h2>
<p>在代码中灵活运用对象字面量，更符合JavaScript的编程风格。</p>
<p>可以使用对象字面量的情况：</p>
<ul>
<li><strong>作为singleton单例的用法</strong>。</li>
</ul>
<p>JavaScript中若只需一个对象实例，则不会去设计一个类，而是只会使用对象字面量。</p>
<ul>
<li><strong>作为多值数据的用法</strong>（函数的参数或返回值等）。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接受对象的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDistance</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(pos.x * pos.x+pos.y * pos.y+pos.z * pos.z);</span><br><span class="line">&#125;</span><br><span class="line">getDistance(&#123; <span class="attr">x</span>:<span class="number">3</span>, <span class="attr">y</span>:<span class="number">2</span>, <span class="attr">z</span>:<span class="number">2</span> &#125;);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//模拟了默认参数的效果的习惯用法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDistance</span>(<span class="params">pos</span>) </span>&#123;</span><br><span class="line">    pos = pos||&#123; <span class="attr">x</span>:<span class="number">0</span>, <span class="attr">y</span>:<span class="number">0</span>, <span class="attr">z</span>:<span class="number">0</span> &#125;; <span class="comment">// 如果没有收到参数pos的话，则使用默认值</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(pos.x * pos.x+pos.y * pos.y+pos.z * pos.z);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//返回多值数据的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//省略</span></span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">x</span>:<span class="number">3</span>, <span class="attr">y</span>:<span class="number">2</span>, <span class="attr">z</span>:<span class="number">2</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> pos = fn();</span><br><span class="line">print(pos.x, pos.y, pos.z);</span><br><span class="line"><span class="comment">//3 2 2</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>代替构造函数来生成对象</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用于生成对象的函数（还有改进的余地）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createObject</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">x</span>:<span class="number">3</span>, <span class="attr">y</span>:<span class="number">2</span>, <span class="attr">z</span>:<span class="number">2</span>,</span><br><span class="line">         getDistance:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">             <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="keyword">this</span>.x * <span class="keyword">this</span>.x+<span class="keyword">this</span>.y * <span class="keyword">this</span>.y+<span class="keyword">this</span>.z * <span class="keyword">this</span>.z);</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = createObject();</span><br><span class="line">print(obj.getDistance());</span><br><span class="line"><span class="comment">//4.123105625617661</span></span><br></pre></td></tr></table></figure>
<h2 id="标准内建对象">标准内建对象</h2>
<p>下表是在ECMAScript第5版中定义的标准内建对象（built-in object）。其中的一些对象可以视为类。</p>
<p><img src="https://hexo-1300861231.cos.ap-shanghai.myqcloud.com/1584596396_20200319133416083_29980.png" alt></p>
<p>为了区分对象的类型，我们用typeof操作符获取对象的类型，它总是返回一个字符串：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">123</span>; <span class="comment">// 'number'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">NaN</span>; <span class="comment">// 'number'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">'str'</span>; <span class="comment">// 'string'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>; <span class="comment">// 'boolean'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>; <span class="comment">// 'undefined'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Math</span>.abs; <span class="comment">// 'function'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> []; <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;; <span class="comment">// 'object'</span></span><br></pre></td></tr></table></figure>
<p>可见number、string、boolean、function和undefined有别于其他类型。特别注意null的类型是object，Array的类型也是object，如果我们用typeof将无法区分出null、Array和通常意义上的object——{}。</p>
<h2 id="全局对象">全局对象</h2>
<p>全局对象是指JavaScript运行时的宿主对象的根对象，客户端JavaScript中即windows对象。全局变量与全局函数是全局对象的属性。</p>
<p>根据运行环境的不同，全局对象中含有的属性也不相同。ECMAScript第5版规定的属性是符合标准的最小集，在通常情况下都会具有更多的属性。例如，对于客户端JavaScript的情况，DOM对象是事先存在的。</p>
<p>ECMAScript第5版中全局对象的属性：</p>
<p><img src="https://hexo-1300861231.cos.ap-shanghai.myqcloud.com/1584596396_20200319133415971_16894.png" alt></p>
<p>注意，无法对全局对象进行函数调用或构造函数调用。</p>
<h2 id="对象属性">对象属性</h2>
<p>属性名可以是标识符、字符串值或者数字。属性值则可以是任意的值、对象或者函数。</p>
<h3 id="属性的类型">属性的类型</h3>
<ul>
<li><strong>实例属性</strong></li>
</ul>
<p>实例属性：对象自身的属性，非继承得到的。在创建实例的构造函数中是this引用（指向待创建的实例）的属性。可以通过hasOwnProperty方法来确认一个属性是否是对象自身的属性。</p>
<ul>
<li><strong>prototype对象属性</strong></li>
</ul>
<p>prototype对象属性：由原型链继承而来的对象属性。详见原型继承。</p>
<ul>
<li><strong>“类”属性</strong></li>
</ul>
<p>JavaSript中“类”可以视为将会作为构造函数调用的Function对象，“类”属性即该Function对象属性。例如，构造函数（Function对象）的prototype属性。</p>
<h3 id="属性访问">属性访问</h3>
<p>通过点运算符或者中括号运算符来访问属性。在点运算符之后书写的属性名会被认为是标识符，而中括号运算符内的则是被转为字符串值的式子。</p>
<p>只能使用中括号运算符的情况分为以下几种：</p>
<p>（1）使用了不能作为标识符的属性名（比如数值或包含横杠（-）的字符串）。</p>
<p>（2）将变量的值作为属性名使用。</p>
<p>（3）将表达式的求值结果作为属性名使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaohong = &#123;</span><br><span class="line">   name: <span class="string">'小红'</span>,</span><br><span class="line">   <span class="string">'middle-school'</span>: <span class="string">'No.1 Middle School'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>xiaohong的属性名middle-school不是一个有效的变量，就需要用’'括起来。访问这个属性也无法使用.操作符，必须用[‘xxx’]来访问：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xiaohong[<span class="string">'middle-school'</span>]; <span class="comment">// 'No.1 Middle School'</span></span><br><span class="line">xiaohong[<span class="string">'name'</span>]; <span class="comment">// '小红'</span></span><br><span class="line">xiaohong.name; <span class="comment">// '小红'</span></span><br></pre></td></tr></table></figure>
<p>也可以用xiaohong[‘name’]来访问xiaohong的name属性，不过xiaohong.name的写法更简洁。我们在编写JavaScript代码的时候，属性名尽量使用标准的变量名，这样就可以直接通过object.prop的形式访问一个属性了。</p>
<p>如果访问一个不存在的属性会返回什么呢？JavaScript规定，访问不存在的属性不报错，而是返回undefined。</p>
<h3 id="检查属性是否存在">检查属性是否存在</h3>
<p>检查属性是否存在：in运算符可以检验对象中属性是否存在，包括到通过原型继承而得到的属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> map = &#123;&#125;;                         <span class="comment">// 通过空的对象字面量生成关联数组</span></span><br><span class="line"><span class="string">'toString'</span> <span class="keyword">in</span> map;                    <span class="comment">// 从Object类中原型继承了属性toString</span></span><br><span class="line"><span class="comment">//true</span></span><br><span class="line"><span class="keyword">var</span> map = &#123;&#125;;</span><br><span class="line">map.hasOwnProperty(<span class="string">'toString'</span>);       <span class="comment">// 由于toString不是直接属性，因此结果为false</span></span><br><span class="line"><span class="comment">//false</span></span><br><span class="line">map[<span class="string">'toString'</span>] = <span class="number">1</span>;</span><br><span class="line">map.hasOwnProperty(<span class="string">'toString'</span>);</span><br><span class="line"><span class="comment">//true</span></span><br><span class="line"><span class="keyword">delete</span> map[<span class="string">'toString'</span>];</span><br><span class="line">map.hasOwnProperty(<span class="string">'toString'</span>);</span><br><span class="line"><span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p>要判断一个属性是否是xiaoming自身拥有的，而不是继承得到的，可以用hasOwnProperty()方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">   name: <span class="string">'小明'</span></span><br><span class="line">&#125;;</span><br><span class="line">xiaoming.hasOwnProperty(<span class="string">'name'</span>); <span class="comment">// true</span></span><br><span class="line">xiaoming.hasOwnProperty(<span class="string">'toString'</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="枚举属性">枚举属性</h3>
<p>枚举属性：通过在for in语句中使用中括号运算符，可以间接地实现对属性值的枚举。使用for each in语句可以直接枚举属性值。</p>
<p>for in语句可以枚举通过原型继承而得到的属性，属性是否被枚举取决于该属性的enumerable属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">MyClass.prototype.z = <span class="number">5</span>;              <span class="comment">// 在原型链上设定属性z</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> MyClass();              <span class="comment">// 属性z继承了原形</span></span><br><span class="line">print(obj.z);</span><br><span class="line"><span class="comment">//5</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123; print(key); &#125;  <span class="comment">// for in语句也会枚举通过原型继承得到的属性</span></span><br><span class="line"><span class="comment">//z</span></span><br></pre></td></tr></table></figure>
<h3 id="新增和删除属性">新增和删除属性</h3>
<p>由于JavaScript的对象是动态类型，你可以自由地给一个对象添加或删除属性。</p>
<p>使用赋值表达式对属性值进行改写。如果指定的是不存在的属性名，则会新增该属性。</p>
<p>使用delete运算表达式来删除属性，详见其它运算符中的delete运算符。（通过原型继承而得到的属性无法被delete）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">   name: <span class="string">'小明'</span></span><br><span class="line">&#125;;</span><br><span class="line">xiaoming.age; <span class="comment">// undefined</span></span><br><span class="line">xiaoming.age = <span class="number">18</span>; <span class="comment">// 新增一个age属性</span></span><br><span class="line">xiaoming.age; <span class="comment">// 18</span></span><br><span class="line"><span class="keyword">delete</span> xiaoming.age; <span class="comment">// 删除age属性</span></span><br><span class="line">xiaoming.age; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">delete</span> xiaoming[<span class="string">'name'</span>]; <span class="comment">// 删除name属性</span></span><br><span class="line">xiaoming.name; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">delete</span> xiaoming.school; <span class="comment">// 删除一个不存在的school属性也不会报错</span></span><br></pre></td></tr></table></figure>
<h2 id="对象方法">对象方法</h2>
<p>在一个对象中绑定函数，称为这个对象的方法。</p>
<p>对象的方法可以看做作为对象属性值的函数。对象方法调用一词会让人觉得要使用的是点运算符，不过事实上中括号运算符也能被调用。</p>
<p>在JavaScript中，对象的定义是这样的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">   name: <span class="string">'小明'</span>,</span><br><span class="line">   birth: <span class="number">1990</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>但是，如果我们给xiaoming绑定一个函数，就可以做更多的事情。比如，写个age()方法，返回xiaoming的年龄：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">   name: <span class="string">'小明'</span>,</span><br><span class="line">   birth: <span class="number">1990</span>,</span><br><span class="line">   age: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">       <span class="keyword">return</span> y - <span class="keyword">this</span>.birth;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">xiaoming.age; <span class="comment">// function xiaoming.age()</span></span><br><span class="line">xiaoming.age(); <span class="comment">// 今年调用是25,明年调用就变成26了</span></span><br></pre></td></tr></table></figure>
<h1>函数(Function)类型</h1>
<p>Function类型可以认为是Object类型中的一种类型，是一种包含了可执行代码，并能够被其他代码调用的特殊对象。</p>
<p>从内部结构来看，它是使用Function对象作为构造函数创建的对象。可以像下面这样，通过对Function函数进行构造函数调用，来生成一个Function对象。不过这种用法并不多见。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数声明（Function对象的生成）</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'return Number(a)+Number(b);'</span>);</span><br><span class="line"><span class="comment">// 最后一个参数是函数体。它之前的参数都是函数的形参。</span></span><br><span class="line"><span class="comment">// 函数的调用</span></span><br><span class="line">sum(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">//7</span></span><br></pre></td></tr></table></figure>
<p>对一个函数进行typeof运算的结果为字符串&quot;function&quot;。</p>
<h2 id="函数声明">函数声明</h2>
<p>函数声明用于定义Function对象（可以看做字面量函数）。在JavaScript中，定义函数的方式如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> x;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> -x;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述abs()函数的定义如下：</p>
<ul>
<li>function指出这是一个函数定义；</li>
<li>abs是函数的名称；</li>
<li>(x)括号内列出函数的参数，多个参数以,分隔；</li>
<li>{ … }之间的代码是函数体，可以包含若干语句，甚至可以没有任何语句。</li>
</ul>
<p>请注意，函数体内部的语句在执行时，一旦执行到return时，函数就执行完毕，并将结果返回。因此，函数内部通过条件判断和循环可以实现非常复杂的逻辑。如果没有return语句，函数执行完毕后也会返回结果，只是结果为undefined。</p>
<p>由于JavaScript的函数也是一个对象，上述定义的abs()函数实际上是一个函数对象，而函数名abs可以视为指向该函数的变量。</p>
<p>JavaScript中的函数声明语句，和Java中方法的定义语句在语法上是基本相同的，不同之处在于，函数声明语句并不是以返回值类型开始，而是使用了关键字function，并且在JavaScript中不用参数指定类型。</p>
<h2 id="匿名函数">匿名函数</h2>
<p>此外，还可以通过匿名函数来定义函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> abs = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> x;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> -x;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在这种方式下，function (x) { … }是一个匿名函数，它没有函数名。但是，这个匿名函数赋值给了变量abs，所以，通过变量abs就可以调用该函数。</p>
<p>“创建一个匿名函数并立刻执行”的语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;)(<span class="number">3</span>); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>
<p>理论上讲，创建一个匿名函数并立刻执行可以这么写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x * x &#125; (<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>但是由于JavaScript语法解析的问题，会报SyntaxError错误，因此需要用括号把整个函数定义括起来：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x * x &#125;) (<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>通过函数声明语句声明的函数，可以在进行声明的代码行之前就对其调用，但匿名函数定义的函数不行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   fn(); <span class="comment">// 在声明函数fn之前对其进行调用</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123; print(<span class="string">'called'</span>); &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 函数调用</span></span><br><span class="line">doit();</span><br><span class="line"><span class="comment">//called</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以下代码通过匿名函数表达式定义函数，结果不同</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   fn();</span><br><span class="line">   <span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; print(<span class="string">'called'</span>); &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 函数调用</span></span><br><span class="line">doit()</span><br><span class="line"><span class="comment">//TypeError: fn is not a function</span></span><br></pre></td></tr></table></figure>
<h2 id="函数参数">函数参数</h2>
<p>函数的形参个数可以与实参不一致，因此不存在函数重载。</p>
<p>传入的参数比定义的参数多也没有问题，虽然函数内部并不需要这些参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">abs(<span class="number">10</span>, <span class="string">'blablabla'</span>); <span class="comment">// 返回10</span></span><br><span class="line">abs(<span class="number">-9</span>, <span class="string">'haha'</span>, <span class="string">'hehe'</span>, <span class="literal">null</span>); <span class="comment">// 返回9</span></span><br></pre></td></tr></table></figure>
<p>传入的参数比定义的少也没有问题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abs(); <span class="comment">// 返回NaN</span></span><br></pre></td></tr></table></figure>
<p>此时abs(x)函数的参数x将收到undefined，计算结果为NaN。</p>
<p>要避免收到undefined，可以对参数进行检查：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">typeof</span> x !== <span class="string">'number'</span>) &#123;</span><br><span class="line">       <span class="keyword">throw</span> <span class="string">'Not a number'</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> x;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> -x;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="arguments对象">arguments对象</h3>
<p>JavaScript在函数调用时会创建一个隐式的的对象arguments。它只在函数内部起作用，并且永远指向当前函数的调用者传入的所有参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'x = '</span> + x); <span class="comment">// 10</span></span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'arg '</span> + i + <span class="string">' = '</span> + <span class="built_in">arguments</span>[i]); <span class="comment">// 10, 20, 30</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);</span><br></pre></td></tr></table></figure>
<p>利用arguments，你可以获得调用者传入的所有参数。也就是说，即使函数不定义任何参数，还是可以拿到参数的值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">0</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">var</span> x = <span class="built_in">arguments</span>[<span class="number">0</span>];</span><br><span class="line">   <span class="keyword">return</span> x &gt;= <span class="number">0</span> ? x : -x;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">abs(); <span class="comment">// 0</span></span><br><span class="line">abs(<span class="number">10</span>); <span class="comment">// 10</span></span><br><span class="line">abs(<span class="number">-9</span>); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>
<p>实际上arguments最常用于判断传入参数的个数。你可能会看到这样的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foo(a[, b], c)</span></span><br><span class="line"><span class="comment">// 接收2~3个参数，b是可选参数，如果只传2个参数，b默认为null：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">2</span>) &#123;</span><br><span class="line">       <span class="comment">// 实际拿到的参数是a和b，c为undefined</span></span><br><span class="line">       c = b; <span class="comment">// 把b赋给c</span></span><br><span class="line">       b = <span class="literal">null</span>; <span class="comment">// b变为默认值</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>要把中间的参数b变为“可选”参数，就只能通过arguments判断，然后重新调整参数并赋值。</p>
<p>函数定义的形参的数量可以通过Function对象自身的length属性来获得。</p>
<p>虽然arguments可以以数组的方式使用，不过它本身并不是数组对象。因此，无法对其使用数组类中的方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   print(<span class="built_in">arguments</span>.length);</span><br><span class="line">   print(<span class="built_in">arguments</span>[<span class="number">0</span>], <span class="built_in">arguments</span>[<span class="number">1</span>], <span class="built_in">arguments</span>[<span class="number">2</span>]);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">fn(<span class="number">7</span>);       <span class="comment">// arguments.length为实参的数量，值为1。arguments[0]的值为7</span></span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//7 undefined undefined</span></span><br><span class="line"> </span><br><span class="line">fn(<span class="number">7</span>, <span class="number">8</span>);   <span class="comment">// arguments.length为实参的数量，值为2。arguments[0]的值为7，arguments[1]的值为8</span></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="comment">//7 8 undefined</span></span><br><span class="line"> </span><br><span class="line">fn(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>);   <span class="comment">// arguments.length为实参的数量，值为1。arguments[0]的值为7，arguments[1]的值为8，arguments[2]的值为9</span></span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="comment">//7 8 9</span></span><br></pre></td></tr></table></figure>
<p>能够通过arguments.callee来获取正在执行的Function对象的引用。这一引用可以在匿名函数实现递归调用时使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// n的阶乘（利用arguments.callee）</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123; is (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>; <span class="keyword">else</span> <span class="keyword">return</span> n * <span class="built_in">arguments</span>.callee(n - <span class="number">1</span>); &#125;)(<span class="number">5</span>);</span><br><span class="line"><span class="comment">//120</span></span><br></pre></td></tr></table></figure>
<h3 id="rest参数">rest参数</h3>
<p>由于JavaScript函数允许接收任意个参数，于是我们就不得不用arguments来获取所有参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i, rest = [];</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &gt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">2</span>; i&lt;<span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">            rest.push(<span class="built_in">arguments</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a = '</span> + a);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'b = '</span> + b);</span><br><span class="line">    <span class="built_in">console</span>.log(rest);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为了获取除了已定义参数a、b之外的参数，我们不得不用arguments，并且循环要从索引2开始以便排除前两个参数，这种写法很别扭，只是为了获得额外的rest参数，有没有更好的方法？</p>
<p>ES6标准引入了rest参数，上面的函数可以改写为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, b, ...rest</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a = '</span> + a);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'b = '</span> + b);</span><br><span class="line">    <span class="built_in">console</span>.log(rest);</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">// 结果:</span></span><br><span class="line"><span class="comment">// a = 1</span></span><br><span class="line"><span class="comment">// b = 2</span></span><br><span class="line"><span class="comment">// Array [ 3, 4, 5 ]</span></span><br><span class="line">foo(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// 结果:</span></span><br><span class="line"><span class="comment">// a = 1</span></span><br><span class="line"><span class="comment">// b = undefined</span></span><br><span class="line"><span class="comment">// Array []</span></span><br></pre></td></tr></table></figure>
<p>rest参数只能写在最后，前面用…标识，从运行结果可知，传入的参数先绑定a、b，多余的参数以数组形式交给变量rest，所以，不再需要arguments我们就获取了全部参数。</p>
<p>如果传入的参数连正常定义的参数都没填满，也不要紧，rest参数会接收一个空数组（注意不是undefined）。</p>
<p>因为rest参数是ES6新标准，所以你需要测试一下浏览器是否支持。</p>
<h2 id="函数调用">函数调用</h2>
<p>函数的调用方式有以下几种：</p>
<p><img src="https://hexo-1300861231.cos.ap-shanghai.myqcloud.com/1584596396_20200319133415759_26740.png" alt></p>
<p>通常来说，将以方法调用的方式使用的函数称为方法，同理，将以构造函数调用方式使用的函数称为构造函数。</p>
<h1>this引用</h1>
<p>在一个方法内部，this是一个特殊变量，它始终指向当前对象。this变量引用会根据方法调用方式的不同而有所不同，如下表所示：</p>
<p><img src="https://hexo-1300861231.cos.ap-shanghai.myqcloud.com/1584596395_20200319133415532_8065.png" alt></p>
<p>注意，并没有对象作用域的说法，对象是作为方法调用时的接收方（调用方），被方法中的this变量引用（通过点运算符或中括号运算符调用对象的方法时，运算符左侧所指定的对象）。</p>
<p>在最外层代码中，this引用引用的是全局对象。在最外层代码中将this引用的值赋值给某个全局变量的话，这个变量就不但是全局对象的属性，同时也是一个对全局对象的引用，从而形成了一种自己引用自己的关系。客户端JavaScript内置的全局变量window即是此类变量。</p>
<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">   x:<span class="number">3</span>,</span><br><span class="line">   doit: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;print(<span class="string">'method is called.'</span>+<span class="keyword">this</span>.x ); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> fn = obj.doit;               <span class="comment">// 将ojb.doit引用的Function对象赋值给全局变量fn</span></span><br><span class="line">fn();                            <span class="comment">// 函数内的this引用引用了全局对象</span></span><br><span class="line"><span class="comment">//method is called. undefined</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> x = <span class="number">5</span>;                       <span class="comment">// 确认this引用确实引用了全局对象</span></span><br><span class="line">fn();</span><br><span class="line"><span class="comment">//method is called. 5</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;<span class="attr">x</span>:<span class="number">4</span>, <span class="attr">doit2</span>:fn&#125;;    <span class="comment">// 将obj的方法（Function对象的引用）赋值给了另一个对象obj2的属性</span></span><br><span class="line">obj2.doit2();                    <span class="comment">// 方法内的this引用引用了对象obj2</span></span><br><span class="line"><span class="comment">//method is called. 4</span></span><br></pre></td></tr></table></figure>
<p>在Java中常常可以省略this，不用明确地写出。因为在查找方法内的名称时总是会在同一个类的域名与方法名中搜索。而在JavaScript中就不能像这样省略this了。如果在上面的例子中将this.x改写为x，它的含义将会变为全局变量x。调用this方法时也是如此。</p>
<h1>构造函数</h1>
<p>构造函数是用于生成对象的函数。构造函数本身和普通的函数声明形式相同，即任何函数都可以通过new表达式调用，都可以作为构造函数。也就是说，如果一个函数通过函数调用的方式使用，则是一个函数；如果通过构造函数调用的方式使用（new表达式），则是一个构造函数。</p>
<p>但在实际开发中，通常会分别设计用于函数调用的函数与用于构造函数调用的函数，所以方便起见，将为了构造函数调用而设计的函数称为构造函数。构造函数的名称一般以大写字母开始（如MyClass）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数（类的定义）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.x = x;</span><br><span class="line">   <span class="keyword">this</span>.y = y;</span><br><span class="line">   <span class="comment">// 相当于方法</span></span><br><span class="line">   <span class="keyword">this</span>.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      print(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> MyClass(<span class="number">3</span>, <span class="number">2</span>);</span><br><span class="line">obj.show();</span><br><span class="line"> </span><br><span class="line"><span class="comment">//3 2</span></span><br></pre></td></tr></table></figure>
<h2 id="构造函数的调用过程">构造函数的调用过程</h2>
<p>构造函数一般通过new表达式来调用，调用过程如下：</p>
<p>首先生成一个不具有特别的操作对象。之后通过new表达式调用构造函数。构造函数内的this引用了（被新生成的）对象。可以通过this引用完成对（被新生成的）对象的创建操作。当执行完构造函数后，会隐式地执行return this操作将（被新生成的）对象的引用作为new表达式的值。</p>
<p>如果显式调用return语句返回一个对象，它将替代默认的this对象成为调用构造函数的new表达式的值。但如果调用的构造函数中的return返回的是基本类型的值，则会无视这一返回值，仍然隐式地执行return this操作。这种操作常常会造成混乱，因此建议不要再在构造函数内使用return语句。</p>
<h2 id="构造函数中的使用陷阱">构造函数中的使用陷阱</h2>
<p>先定义一个构造函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.hello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">'Hello, '</span> + <span class="keyword">this</span>.name + <span class="string">'!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用关键字new来调用这个函数，并返回一个对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> Student(<span class="string">'小明'</span>);</span><br><span class="line">xiaoming.name; <span class="comment">// '小明'</span></span><br><span class="line">xiaoming.hello(); <span class="comment">// Hello, 小明!</span></span><br></pre></td></tr></table></figure>
<p>如果一个函数被定义为用于创建对象的构造函数，但是调用时忘记了写new，怎么办？</p>
<p>在strict模式下，<a href="http://this.name" target="_blank" rel="noopener">this.name</a> = name将报错，因为this绑定为undefined，在非strict模式下，<a href="http://this.name" target="_blank" rel="noopener">this.name</a> = name不报错，因为this绑定为window，于是无意间创建了全局变量name，并且返回undefined，这个结果更糟糕。所以，调用构造函数千万不要忘记写new。</p>
<p>为了区分普通函数和构造函数，按照约定，构造函数首字母应当大写，而普通函数首字母应当小写，这样，一些语法检查工具如[jslint将可以帮你检测到漏写的new。</p>
<p>最后，我们还可以编写一个createStudent()函数，在内部封装所有的new操作。一个常用的编程模式像这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = props.name || <span class="string">'匿名'</span>; <span class="comment">// 默认值为'匿名'</span></span><br><span class="line">    <span class="keyword">this</span>.grade = props.grade || <span class="number">1</span>; <span class="comment">// 默认值为1</span></span><br><span class="line">&#125;</span><br><span class="line">Student.prototype.hello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'Hello, '</span> + <span class="keyword">this</span>.name + <span class="string">'!'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStudent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Student(props || &#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个createStudent()函数有几个巨大的优点：一是不需要new来调用，二是参数非常灵活，可以不传，也可以这么传：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = createStudent(&#123;</span><br><span class="line">    name: <span class="string">'小明'</span></span><br><span class="line">&#125;);</span><br><span class="line">xiaoming.grade; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>如果创建的对象有很多属性，我们只需要传递需要的某些属性，剩下的属性可以用默认值。由于参数是一个Object，我们无需记忆参数的顺序。如果恰好从JSON拿到了一个对象，就可以直接创建出xiaoming。</p>

      </div>
      
      
      
    </div>
    
  <ul class="breadcrumb">
          
            <li><a href="/quotes/">QUOTES</a></li>
            <li><a href="/quotes/JavaScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">JAVASCRIPT学习笔记</a></li>
            <li>12-对象类型与函数类型</li>
          
  </ul>

    
    
    
  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">对象(Object)类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#对象字面量"><span class="nav-text">对象字面量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#标准内建对象"><span class="nav-text">标准内建对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#全局对象"><span class="nav-text">全局对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象属性"><span class="nav-text">对象属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#属性的类型"><span class="nav-text">属性的类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性访问"><span class="nav-text">属性访问</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#检查属性是否存在"><span class="nav-text">检查属性是否存在</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#枚举属性"><span class="nav-text">枚举属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#新增和删除属性"><span class="nav-text">新增和删除属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象方法"><span class="nav-text">对象方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">函数(Function)类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#函数声明"><span class="nav-text">函数声明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匿名函数"><span class="nav-text">匿名函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数参数"><span class="nav-text">函数参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#arguments对象"><span class="nav-text">arguments对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rest参数"><span class="nav-text">rest参数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数调用"><span class="nav-text">函数调用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">this引用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text">构造函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#构造函数的调用过程"><span class="nav-text">构造函数的调用过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#构造函数中的使用陷阱"><span class="nav-text">构造函数中的使用陷阱</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="jiateng.jiang"
    src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">jiateng.jiang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">44</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jiateng.jiang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.2
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  






  <script src="/js/local-search.js"></script>








<script>
if (document.querySelectorAll('div.pdf').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/pdfobject@2/pdfobject.min.js', () => {
    document.querySelectorAll('div.pdf').forEach(element => {
      PDFObject.embed(element.getAttribute('target'), element, {
        pdfOpenParams: {
          navpanes: 0,
          toolbar: 0,
          statusbar: 0,
          pagemode: 'thumbs',
          view: 'FitH'
        },
        PDFJS_URL: '/lib/pdf/web/viewer.html',
        height: element.getAttribute('height') || '100%'
      });
    });
  }, window.PDFObject);
}
</script>





  

  

  

</body>
</html>
